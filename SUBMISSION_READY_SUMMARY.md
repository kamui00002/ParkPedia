# App Store再提出 準備完了サマリー

**作成日**: 2025年11月28日
**バージョン**: 1.0.5 (Build 9)

---

## ✅ 完了済みの作業

### 1. プライバシーポリシーの公開
- **URL**: https://kamui00002.github.io/ParkPedia/privacy-policy.html
- **言語**: 日本語・英語の切り替え対応
- **連絡先**: kamui00002@yahoo.co.jp に更新済み
- **内容**:
  - データ収集・使用方針
  - ユーザー権限（アカウント削除、データアクセス、ユーザーブロック）
  - 不適切なコンテンツ管理
  - 24時間対応ポリシー

### 2. Firestoreセキュリティルールのデプロイ
- **デプロイ日**: 2025年11月28日
- **使用ファイル**: firestore-rules-simple.txt
- **対象コレクション**:
  - `parks` - 公園情報
  - `reviews` - レビュー
  - `favorites` - お気に入り・訪問済み・行ってみたい
  - `reports` - コンテンツ報告
  - `blockedUsers` - ブロックされたユーザー
  - `users` - ユーザー情報
- **セキュリティ機能**:
  - 認証済みユーザーのみ書き込み可能
  - ユーザーは自分のデータのみ編集・削除可能
  - タイムスタンプの自動検証
  - データ型とサイズの検証

### 3. すべての必須機能の実装
- ✅ **アカウント削除機能** (Guideline 5.1.1v)
  - 場所: マイページ > 「アカウントを削除」ボタン
  - 2段階確認ダイアログ
  - すべてのユーザーデータを完全削除

- ✅ **利用規約同意機能** (Guideline 1.2)
  - 場所: ログイン画面 > 「新規登録」
  - 必須チェックボックス
  - ゼロトレランスポリシー明記

- ✅ **コンテンツ報告機能** (Guideline 1.2)
  - 場所: 公園詳細 > レビュー > 「🚩 報告」ボタン
  - Firestoreの`reports`コレクションに保存
  - モデレーションチームが24時間以内に対応

- ✅ **ユーザーブロック機能** (Guideline 1.2)
  - 場所: 公園詳細 > レビュー > 「🚫 ブロック」ボタン
  - ブロックしたユーザーのレビューは即座に非表示
  - Firestoreの`blockedUsers`コレクションに保存

### 4. 開発ナレッジベースの作成
- **ファイル**: DEVELOPMENT_KNOWLEDGE_BASE.md
- **内容**:
  - すべての問題と解決策を記録
  - Firestoreルールのデプロイエラーと対処法
  - GitHub Pagesのサブモジュール問題と解決方法
  - App Storeレビューガイドラインへの対応方法
  - セキュリティのベストプラクティス

---

## 📋 次に行うべき手順（手動作業）

### ステップ1: App Store ConnectでプライバシーポリシーURLを登録

1. **App Store Connectにログイン**
   - URL: https://appstoreconnect.apple.com/

2. **ParkPediaアプリを選択**
   - 「マイApp」> 「ParkPedia」

3. **プライバシーポリシーURLを登録**
   - 「アプリ情報」タブをクリック
   - 「一般情報」セクションの「プライバシーポリシーURL」フィールドを探す
   - 以下のURLを入力:
     ```
     https://kamui00002.github.io/ParkPedia/privacy-policy.html
     ```
   - 「保存」をクリック

### ステップ2: レビュアーへの返信を送信

**返信内容は `APP_STORE_CONNECT_REPLY_DRAFT.md` に準備済みです。**

1. **App Store Connectで返信画面を開く**
   - 「App Review」> 「ParkPedia」
   - Submission ID: 1d567cb5-ebb0-4fbf-9c10-630b1f297188

2. **返信内容をコピー**
   - `APP_STORE_CONNECT_REPLY_DRAFT.md` の内容をすべてコピー
   - 特に以下のポイントを強調:
     - ✅ アカウント削除機能は実装済み（マイページ）
     - ✅ 利用規約同意は実装済み（ログイン画面）
     - ✅ コンテンツ報告・ユーザーブロック機能は実装済み（レビューセクション）
     - ✅ プライバシーポリシーURL: https://kamui00002.github.io/ParkPedia/privacy-policy.html

3. **返信を送信**
   - App Store Connectの返信フィールドにペースト
   - 内容を確認して「送信」

### ステップ3: デモアカウントの確認

**レビュアーがテストに使用するため、必ず有効である必要があります。**

- **Email**: reviewer@parkpedia.test
- **Password**: ReviewTest2024!

**確認事項**:
1. アカウントが存在し、ログインできる
2. アカウントが削除されていない
3. すべての機能にアクセスできる

**⚠️ 重要**: レビュー期間中はこのアカウントを削除しないでください！

### ステップ4: App Store Connectでビルドの状態を確認

1. **現在のビルド情報**
   - バージョン: 1.0.5
   - ビルド番号: 9
   - プラットフォーム: iOS

2. **ビルドの状態確認**
   - App Store Connect > 「TestFlight」タブ
   - ビルド9が「審査準備完了」状態になっているか確認
   - Export Compliance情報が入力済みか確認

3. **必要に応じて新しいビルドを作成**
   - 現在のビルド9で問題なければ、新しいビルドは不要
   - コードに変更を加えた場合のみ、新しいビルドが必要:
     ```bash
     # ビルド番号を10にインクリメント
     # app.json で ios.buildNumber を 10 に変更
     eas build --platform ios --profile production
     ```

---

## 📸 スクリーンショットのアップロード（オプション）

App Store Connectでスクリーンショットがまだアップロードされていない場合:

1. **必要なサイズ**:
   - iPhone 6.7インチ（iPhone 14 Pro Max, 15 Pro Max）
   - iPhone 6.5インチ（iPhone 11 Pro Max, XS Max）

2. **推奨スクリーンショット**:
   - ホーム画面（おすすめの公園表示）
   - 公園詳細画面（レビュー、写真表示）
   - マイページ（お気に入り、アカウント削除ボタン）
   - レビュー投稿画面
   - ユーザーブロック・報告機能

---

## 🔍 最終チェックリスト

提出前に以下を確認してください:

- [x] プライバシーポリシーがGitHub Pagesで公開されている
- [x] Firestoreセキュリティルールがデプロイされている
- [ ] App Store ConnectにプライバシーポリシーURLを登録した
- [ ] デモアカウント（reviewer@parkpedia.test）が有効
- [ ] レビュアーへの返信を送信した
- [ ] ビルド9が「審査準備完了」状態

---

## 📞 サポート情報

### 連絡先
- **メール**: kamui00002@yahoo.co.jp
- **GitHub**: https://github.com/kamui00002/ParkPedia

### 参考ドキュメント
- `APP_STORE_CONNECT_REPLY_DRAFT.md` - レビュアーへの返信内容
- `APP_STORE_SUBMISSION_CHECKLIST.md` - 詳細チェックリスト
- `DEVELOPMENT_KNOWLEDGE_BASE.md` - 開発ナレッジベース
- `FIRESTORE_RULES_DEPLOY.md` - Firestoreルールデプロイ手順

---

## 🎯 予想されるレビュー結果

### 楽観的シナリオ
すべての必須機能が実装済みで、プライバシーポリシーとFirestoreルールも完備されているため、**承認される可能性が高い**です。

### 追加の質問がある場合
レビュアーから追加の質問や確認があった場合は、`APP_STORE_CONNECT_REPLY_DRAFT.md` の内容を参照して、迅速に対応してください。

### 再提出が必要な場合
もし何か問題が見つかった場合は、`DEVELOPMENT_KNOWLEDGE_BASE.md` に記録されている問題解決方法を参照してください。

---

## ✅ 完了後の次のステップ

審査が承認されたら:

1. **App Storeでの公開**
   - リリース日を設定
   - 公開ボタンをクリック

2. **ユーザーへの告知**
   - ソーシャルメディアで告知
   - 友人・家族にシェア

3. **フィードバックの収集**
   - レビューを読む
   - バグ報告に対応
   - 機能リクエストを検討

4. **次のバージョンの計画**
   - ユーザーフィードバックに基づいた改善
   - 新機能の追加
   - パフォーマンスの最適化

---

**準備完了！頑張ってください！** 🚀
