# 🚀 App Store配信前 最終チェックリスト

**チェック実施日:** _______________
**チェック実施者:** _______________
**チェック回数:** ___ / 5回以上

---

## ✅ チェック1: 基本設定・ビルド設定

### 1.1 バージョン情報
- [ ] `app.json` の `version` が適切（現在: `1.0.0`）
- [ ] `ios/ParkPedia/Info.plist` の `CFBundleShortVersionString` が `1.0` と一致
- [ ] `ios/ParkPedia/Info.plist` の `CFBundleVersion` が適切（現在: `1`）
- [ ] バージョン番号がApp Store Connectで設定したものと一致

### 1.2 Bundle Identifier
- [ ] `app.json` の `bundleIdentifier` が `com.parkpedia.app` と設定されている
- [ ] XcodeプロジェクトのBundle Identifierが一致している
- [ ] App Store Connectで登録済みのBundle IDと一致している

### 1.3 アプリ名・表示名
- [ ] `app.json` の `name` が `ParkPedia` と設定されている
- [ ] アプリ名が適切（30文字以内）
- [ ] 表示名がApp Store Connectと一致

### 1.4 アイコン・スプラッシュスクリーン
- [ ] `app.json` の `icon` パスが正しい（`./assets/icon.png`）
- [ ] アイコンファイルが存在し、1024x1024pxのPNG形式
- [ ] `splash.image` が正しく設定されている
- [ ] `splash.backgroundColor` が `#4CAF50` と設定されている
- [ ] iOS用アイコンが `ios/ParkPedia/Images.xcassets/AppIcon.appiconset/` に存在

### 1.5 向き・サポートデバイス
- [ ] `orientation` が `portrait` と設定されている
- [ ] `supportsTablet` が `true` と設定されている
- [ ] `Info.plist` の `UISupportedInterfaceOrientations` が適切

---

## ✅ チェック2: 権限・プライバシー設定

### 2.1 位置情報権限
- [ ] `NSLocationWhenInUseUsageDescription` が設定されている
- [ ] 説明文が適切（「このアプリは近くの公園を検索するために位置情報を使用します。」）
- [ ] `expo-location` プラグインが設定されている

### 2.2 カメラ権限
- [ ] `NSCameraUsageDescription` が設定されている
- [ ] 説明文が適切（「このアプリは公園の写真を撮影するためにカメラを使用します。」）
- [ ] `expo-image-picker` プラグインが設定されている

### 2.3 フォトライブラリ権限
- [ ] `NSPhotoLibraryUsageDescription` が設定されている
- [ ] 説明文が適切（「このアプリは公園の写真を選択するためにフォトライブラリにアクセスします。」）

### 2.4 プライバシー設定
- [ ] `NSAppTransportSecurity` が適切に設定されている
- [ ] `NSAllowsArbitraryLoads` が `false` になっている（セキュリティ）

---

## ✅ チェック3: Firebase設定

### 3.1 Firebase設定ファイル
- [ ] `firebaseConfig.js` が存在する
- [ ] Firebase設定値が正しく設定されている
  - [ ] `apiKey` が設定されている
  - [ ] `authDomain` が設定されている
  - [ ] `projectId` が `parkpedia-app` と一致
  - [ ] `storageBucket` が設定されている
  - [ ] `messagingSenderId` が設定されている
  - [ ] `appId` が設定されている

### 3.2 Firebase認証
- [ ] `auth` が正しくエクスポートされている
- [ ] エラーハンドリングが実装されている（`auth/already-initialized` の処理）

### 3.3 Firestore
- [ ] `db` が正しくエクスポートされている
- [ ] Firestoreルールが適切に設定されている（`firestore.rules`）

### 3.4 Storage
- [ ] `storage` が正しくエクスポートされている
- [ ] Storageルールが適切に設定されている

---

## ✅ チェック4: 広告設定

### 4.1 広告無効化確認
- [ ] `adConfig.js` の `AD_ENABLED` が `false` になっている ⚠️ **重要**
- [ ] 広告プレースホルダーが表示されることを確認
- [ ] 実際の広告が表示されないことを確認

### 4.2 広告ユニットID
- [ ] `AD_UNIT_IDS` がプレースホルダー（`ca-app-pub-xxxxx/yyyyy`）になっている
- [ ] 本番用のIDが設定されていないことを確認

### 4.3 広告コンポーネント
- [ ] `AdBannerPlaceholder.js` が正しく実装されている
- [ ] 広告コードがコメントアウトされている
- [ ] プレースホルダーが表示されることを確認

---

## ✅ チェック5: コード品質・エラーハンドリング

### 5.1 コンソールログ
- [ ] 開発用の `console.log` が残っていないか確認
- [ ] 本番環境で不要なログが出力されないことを確認
- [ ] `firebaseConfig.js` のログは残してもOK（初期化確認用）

### 5.2 エラーハンドリング
- [ ] 各スクリーンでエラーハンドリングが実装されている
- [ ] ネットワークエラー時の処理が適切
- [ ] Firebase接続エラー時の処理が適切
- [ ] 画像読み込みエラー時の処理が適切

### 5.3 未使用コード
- [ ] 未使用のインポートがない
- [ ] 未使用の変数・関数がない
- [ ] コメントアウトされたコードがない（必要に応じて削除）

### 5.4 パフォーマンス
- [ ] メモリリークがない
- [ ] 画像の最適化がされている
- [ ] リストのパフォーマンスが適切（FlatList使用）

---

## ✅ チェック6: 機能動作確認

### 6.1 認証機能
- [ ] ログイン画面が表示される
- [ ] ログインが正常に動作する
- [ ] ログアウトが正常に動作する
- [ ] 未ログイン時の制限が適切に機能する

### 6.2 公園一覧・検索
- [ ] ホーム画面で公園一覧が表示される
- [ ] 検索機能が正常に動作する
- [ ] フィルター機能が正常に動作する
- [ ] おすすめ公園が表示される
- [ ] 位置情報に基づく距離計算が正常に動作する

### 6.3 公園詳細
- [ ] 公園詳細画面が正常に表示される
- [ ] 画像ギャラリーが正常に動作する
- [ ] 地図が正常に表示される
- [ ] レビュー一覧が表示される
- [ ] お気に入り・訪問済み機能が正常に動作する

### 6.4 公園追加
- [ ] 公園追加画面が表示される
- [ ] 写真アップロードが正常に動作する（任意）
- [ ] 位置情報取得が正常に動作する
- [ ] フォーム送信が正常に動作する

### 6.5 レビュー機能
- [ ] レビュー投稿画面が表示される
- [ ] 星評価が正常に動作する
- [ ] 写真アップロードが正常に動作する（任意）
- [ ] レビュー送信が正常に動作する

### 6.6 マイページ
- [ ] マイページが表示される
- [ ] お気に入り公園一覧が表示される
- [ ] 訪問済み公園一覧が表示される
- [ ] 投稿したレビュー一覧が表示される
- [ ] 最近見た公園一覧が表示される

---

## ✅ チェック7: UI/UX確認

### 7.1 デザイン一貫性
- [ ] カラーパレットが統一されている（緑系: `#10B981`, `#064E3B` など）
- [ ] フォントサイズ・太さが適切
- [ ] 余白・パディングが適切
- [ ] ボタンのスタイルが統一されている

### 7.2 レスポンシブ対応
- [ ] iPhone SE（小さい画面）で正常に表示される
- [ ] iPhone 14 Pro Max（大きい画面）で正常に表示される
- [ ] iPadで正常に表示される（`supportsTablet: true`）

### 7.3 アクセシビリティ
- [ ] テキストが読みやすい
- [ ] ボタンがタップしやすいサイズ
- [ ] コントラストが適切

### 7.4 ナビゲーション
- [ ] ヘッダーのナビゲーションが正常に動作する
- [ ] 戻るボタンが正常に動作する
- [ ] 画面遷移がスムーズ

---

## ✅ チェック8: Xcode設定

### 8.1 プロジェクト設定
- [ ] Xcodeでプロジェクトが正常に開ける
- [ ] ビルドエラーがない
- [ ] 警告（Warning）を確認し、必要に応じて修正

### 8.2 署名・証明書
- [ ] 配布用の証明書が設定されている
- [ ] Provisioning Profileが正しく設定されている
- [ ] Bundle Identifierが一致している

### 8.3 ビルド設定
- [ ] Releaseビルドが正常に完了する
- [ ] Archiveが正常に作成できる
- [ ] ビルド設定が `Release` になっている

### 8.4 Info.plist確認
- [ ] `CFBundleShortVersionString` が `1.0`
- [ ] `CFBundleVersion` が `1`
- [ ] `LSMinimumSystemVersion` が適切（現在: `12.0`）
- [ ] 権限説明文がすべて設定されている

---

## ✅ チェック9: App Store Connect設定

### 9.1 アプリ情報
- [ ] アプリ名が設定されている
- [ ] サブタイトルが設定されている（任意）
- [ ] カテゴリが適切に設定されている
- [ ] 年齢制限が適切に設定されている

### 9.2 スクリーンショット
- [ ] 必須のスクリーンショットがアップロードされている
  - [ ] iPhone 6.7インチ（iPhone 14 Pro Maxなど）
  - [ ] iPhone 6.5インチ（iPhone 11 Pro Maxなど）
  - [ ] iPhone 5.5インチ（iPhone 8 Plusなど）
- [ ] スクリーンショットが最新のUIと一致している

### 9.3 説明文
- [ ] アプリ説明文が適切に記述されている
- [ ] キーワードが適切に設定されている
- [ ] プライバシーポリシーURLが設定されている（必要に応じて）

### 9.4 価格・配信
- [ ] 価格が設定されている（無料アプリの場合: 無料）
- [ ] 配信地域が適切に設定されている
- [ ] 配信開始日が設定されている

---

## ✅ チェック10: 最終確認

### 10.1 ビルド・アップロード
- [ ] Archiveが正常に作成できた
- [ ] App Store Connectへのアップロードが成功した
- [ ] ビルドが「処理中」から「処理済み」になった

### 10.2 テストフライト（任意）
- [ ] TestFlightでビルドが配信された
- [ ] テストユーザーで動作確認した
- [ ] クラッシュレポートがない

### 10.3 審査提出前
- [ ] すべてのチェック項目が完了している
- [ ] 審査用のメモが準備されている
- [ ] デモアカウント情報が準備されている（必要に応じて）

### 10.4 最終確認事項
- [ ] **広告が無効になっている** ⚠️ **最重要**
- [ ] 本番環境のFirebase設定が正しい
- [ ] バージョン番号が適切
- [ ] アイコン・スプラッシュスクリーンが設定されている
- [ ] 権限説明文がすべて設定されている
- [ ] エラーが発生しない
- [ ] 主要機能がすべて動作する

---

## 📝 チェック実施記録

### 1回目
- 実施日: _______________
- 実施者: _______________
- 結果: ☐ 合格 ☐ 要修正
- 備考: 

### 2回目
- 実施日: _______________
- 実施者: _______________
- 結果: ☐ 合格 ☐ 要修正
- 備考: 

### 3回目
- 実施日: _______________
- 実施者: _______________
- 結果: ☐ 合格 ☐ 要修正
- 備考: 

### 4回目
- 実施日: _______________
- 実施者: _______________
- 結果: ☐ 合格 ☐ 要修正
- 備考: 

### 5回目
- 実施日: _______________
- 実施者: _______________
- 結果: ☐ 合格 ☐ 要修正
- 備考: 

### 6回目以降（必要に応じて）
- 実施日: _______________
- 実施者: _______________
- 結果: ☐ 合格 ☐ 要修正
- 備考: 

---

## ⚠️ 重要な注意事項

1. **広告設定**: `AD_ENABLED = false` になっていることを必ず確認してください
2. **Firebase設定**: 本番環境の設定値が正しいことを確認してください
3. **バージョン番号**: App Store Connectと一致していることを確認してください
4. **権限説明文**: すべての権限に説明文が設定されていることを確認してください
5. **ビルド設定**: Releaseビルドで動作確認してください

---

## 🐛 よくある問題と対処法

### 問題1: ビルドエラー
- **原因**: 依存関係の問題、署名の問題
- **対処**: `pod install` を実行、Xcodeでクリーンビルド

### 問題2: アイコンが表示されない
- **原因**: アイコンファイルが存在しない、パスが間違っている
- **対処**: `assets/icon.png` が存在することを確認

### 問題3: 権限エラー
- **原因**: Info.plistに説明文が設定されていない
- **対処**: `app.json` の `infoPlist` を確認

### 問題4: Firebase接続エラー
- **原因**: 設定値が間違っている、ネットワークの問題
- **対処**: `firebaseConfig.js` の設定値を確認

---

**✅ すべてのチェックが完了したら、App Store Connectに提出してください！**

